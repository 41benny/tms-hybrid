@import 'tailwindcss';
@import './table-font-sm.css';
@config '../../tailwind.config.js';

@layer base {

    /* --- 1. DEFINISI TEMA (CSS VARIABLES) --- */
    :root {
        /* Default: Midnight Cyan (Theme 2) */
        --bg-app: #020617;
        --bg-panel: rgba(15, 23, 42, 0.6);
        --bg-sidebar: rgba(2, 6, 23, 0.85);
        --color-primary: #22D3EE;
        /* cyan-400 */
        --color-secondary: #0E7490;
        /* cyan-700 */
        --color-text-main: #CBD5E1;
        /* Slate 300 - Softer white */
        --color-text-muted: #94A3B8;
        --border-color: rgba(34, 211, 238, 0.2);
        --glow-color: rgba(34, 211, 238, 0.5);
        --gradient-bg: radial-gradient(ellipse at top right, rgba(8, 145, 178, 0.15), transparent 70%);
        --gradient-table: linear-gradient(135deg, #020617 0%, #0e7490 100%);
        --bg-surface-secondary: rgba(0, 0, 0, 0.3);
    }

    /* TEMA 2: Royal Gold */
    [data-theme="gold"] {
        --bg-app: #020617;
        /* Slate 950 - Darker base */
        --bg-panel: rgba(15, 23, 42, 0.7);
        /* Slate 900 - Matches sidebar tone */
        --bg-sidebar: rgba(2, 6, 23, 0.9);
        /* Slate 950 - Consistent dark sidebar */
        --color-primary: #FBBF24;
        /* amber-400 */
        --color-secondary: #B45309;
        --color-text-main: #CBD5E1;
        /* Slate 300 - Softer white */
        /* Slate 50 */
        --color-text-muted: #94A3B8;
        /* Slate 400 */
        --border-color: rgba(251, 191, 36, 0.15);
        --glow-color: rgba(251, 191, 36, 0.3);
        --gradient-bg: radial-gradient(ellipse at top right, rgba(180, 83, 9, 0.1), transparent 70%);
        --gradient-table: linear-gradient(135deg, #020617 0%, #b45309 100%);
        --bg-surface-secondary: rgba(0, 0, 0, 0.3);
    }

    /* TEMA 3: Aurora Nebula (Bold Gradients) */
    [data-theme="aurora"] {
        /* Light Content Background */
        --bg-app: #F8FAFC;

        /* White Glass Panels */
        --bg-panel: rgba(255, 255, 255, 0.9);

        /* Light Glass Sidebar with Gradient */
        --bg-sidebar: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(243, 232, 255, 0.9) 100%);

        /* Vibrant Accents */
        --color-primary: #8B5CF6;
        /* Violet 500 */
        --color-secondary: #4C1D95;
        /* Violet 900 */

        /* Gradients */
        --gradient-header: linear-gradient(135deg, #6366f1 0%, #a855f7 50%, #ec4899 100%);
        --gradient-table: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        --gradient-btn: linear-gradient(135deg, #8B5CF6 0%, #D946EF 100%);
        --gradient-card: linear-gradient(145deg, #ffffff 0%, #f3e8ff 100%);

        /* Text */
        --color-text-main: #0F172A;
        --color-text-muted: #64748B;

        /* Borders */
        --border-color: rgba(139, 92, 246, 0.2);

        /* Glow */
        --glow-color: rgba(139, 92, 246, 0.5);
        --gradient-bg:
            radial-gradient(circle at top right, rgba(168, 85, 247, 0.15), transparent 40%),
            radial-gradient(circle at bottom left, rgba(236, 72, 153, 0.1), transparent 40%);

        --bg-surface-secondary: #FFFFFF;
    }

    body {
        background-color: var(--bg-app);
        color: var(--color-text-main);
        transition: background-color 0.5s ease, color 0.3s ease;
        font-family: 'Inter', sans-serif;
    }

    /* --- 2. SCROLLBAR FIX (Agar muncul Neon) --- */
    * {
        scrollbar-width: thin;
        scrollbar-color: var(--color-primary) rgba(0, 0, 0, 0.3);
    }

    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--color-primary);
        border-radius: 10px;
        box-shadow: 0 0 10px var(--glow-color);
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--color-primary);
        box-shadow: 0 0 15px var(--glow-color);
        cursor: pointer;
    }

    /* Force scrollbar to always show */
    html {
        overflow-y: scroll;
    }

}

@layer components {
    .theme-bg-gradient {
        background: var(--gradient-bg);
    }

    .theme-panel {
        background: var(--bg-panel);
        border: 1px solid var(--border-color);
        backdrop-filter: blur(12px);
    }

    /* Global Card Header Fix for Aurora */
    [data-theme="aurora"] .card-header,
    [data-theme="aurora"] div.theme-panel>div:first-child {
        background: linear-gradient(to right, rgba(139, 92, 246, 0.25), rgba(255, 255, 255, 0)) !important;
        border-bottom: 3px solid rgba(139, 92, 246, 0.5) !important;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    }

    [data-theme="aurora"] .card-header h3,
    [data-theme="aurora"] div.theme-panel>div:first-child h3,
    [data-theme="aurora"] div.theme-panel>div:first-child .text-lg {
        color: var(--color-primary) !important;
        font-weight: 800 !important;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    /* Override Header for Aurora Theme */
    [data-theme="aurora"] header.theme-panel {
        background: var(--gradient-header) !important;
        border-bottom: none !important;
        box-shadow: 0 4px 20px rgba(168, 85, 247, 0.3);
    }

    /* Header Text in Aurora must be white */
    [data-theme="aurora"] header .text-contrast {
        color: white !important;
    }

    [data-theme="aurora"] header .theme-text-muted {
        color: rgba(255, 255, 255, 0.8) !important;
    }

    /* Fix Navbar Icons for Aurora */
    [data-theme="aurora"] header button.theme-text-muted {
        color: rgba(255, 255, 255, 0.9) !important;
    }

    [data-theme="aurora"] header button.theme-text-muted:hover {
        background: rgba(255, 255, 255, 0.2) !important;
        color: white !important;
    }

    /* Fix System Badge for Aurora */
    [data-theme="aurora"] header .font-mono {
        background: rgba(255, 255, 255, 0.2) !important;
        color: white !important;
        border-color: rgba(255, 255, 255, 0.3) !important;
    }

    /* System status dot - pink for Aurora theme */
    [data-theme="aurora"] header .font-mono .system-status-dot {
        background: #ec4899 !important;
        box-shadow: 0 0 8px rgba(236, 72, 153, 0.8) !important;
    }

    /* Board Card Gradient for Aurora */
    [data-theme="aurora"] .theme-panel.rounded-2xl {
        background: var(--gradient-card) !important;
        border: 1px solid rgba(139, 92, 246, 0.15);
    }

    .theme-sidebar {
        background: var(--bg-sidebar);
        border-right: 1px solid var(--border-color);
    }

    .theme-text-primary {
        color: var(--color-primary);
    }

    .theme-text-muted {
        color: var(--color-text-muted);
    }

    .theme-border {
        border-color: var(--border-color);
    }

    .theme-glow-text {
        text-shadow: 0 0 15px var(--glow-color);
    }

    /* Aurora: Brand header (logo + title) - focus on fonts */
    [data-theme="aurora"] .sidebar-brand-shell {
        padding: 0;
        border-radius: 0;
        background: transparent;
        border: none;
        box-shadow: none;
    }

    [data-theme="aurora"] .sidebar-brand-shell h1.text-white {
        letter-spacing: 0.18em;
        background-image: linear-gradient(135deg, #6366f1 0%, #a855f7 50%, #ec4899 100%) !important;
        background-size: 200% 200%;
        -webkit-background-clip: text !important;
        background-clip: text !important;
        color: transparent !important;
        animation: auroraBrand 8s ease-in-out infinite;
        font-weight: 800;
    }

    [data-theme="aurora"] .sidebar-brand-shell .theme-text-primary {
        background-image: linear-gradient(135deg, #6366f1 0%, #a855f7 50%, #ec4899 100%) !important;
        -webkit-background-clip: text !important;
        background-clip: text !important;
        color: transparent !important;
        text-shadow: 0 0 20px rgba(168, 85, 247, 0.6);
    }

    .text-contrast {
        color: white;
    }

    [data-theme="aurora"] .text-contrast {
        color: var(--color-text-main);
    }

    /* Button Style */
    .btn-primary {
        @apply px-4 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all duration-300 flex items-center gap-2;
        background: var(--color-primary);
        color: #000;
        box-shadow: 0 0 15px var(--glow-color);
    }

    .btn-primary:hover {
        filter: brightness(1.2);
        box-shadow: 0 0 25px var(--glow-color);
        transform: translateY(-1px);
    }

    /* Aurora: Global button polish */
    [data-theme="aurora"] .tms-btn {
        border-radius: 9999px;
        border-width: 1px;
        border-color: rgba(148, 163, 184, 0.25);
        box-shadow: 0 8px 22px rgba(148, 163, 184, 0.35);
        backdrop-filter: blur(10px);
    }

    /* Aurora: Sidebar-specific buttons (collapse & AI) */
    [data-theme="aurora"] #sidebarToggle.tms-btn,
    [data-theme="aurora"] .ai-assistant-btn.tms-btn {
        border-radius: 9999px;
        border-width: 1px;
        border-color: rgba(255, 255, 255, 0.6);
        box-shadow: 0 14px 30px rgba(139, 92, 246, 0.45);
    }

    [data-theme="aurora"] #sidebarToggle.tms-btn {
        background: linear-gradient(90deg, #4f46e5 0%, #8b5cf6 40%, #ec4899 100%) !important;
    }

    [data-theme="aurora"] .ai-assistant-btn.tms-btn {
        background: linear-gradient(135deg, rgba(226, 232, 255, 0.96), rgba(255, 255, 255, 0.96) 45%, rgba(248, 250, 252, 0.9) 100%) !important;
    }

    [data-theme="aurora"] #sidebarToggle.tms-btn svg {
        color: white !important;
    }

    [data-theme="aurora"] .ai-assistant-btn .sidebar-text {
        background-image: linear-gradient(120deg, #0ea5e9 0%, #6366f1 30%, #a855f7 60%, #ec4899 80%, #f97316 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent !important;
        text-shadow: 0 0 6px rgba(255, 255, 255, 0.9);
        font-weight: 700;
        font-size: 0.9rem;
    }

    /* Gemini icon only for Aurora */
    .ai-icon-gem {
        display: none;
    }

    [data-theme="aurora"] .ai-assistant-btn .ai-icon-base {
        display: none;
    }

    [data-theme="aurora"] .ai-assistant-btn .ai-icon-gem {
        display: inline-block;
        color: #6366f1 !important;
        filter: drop-shadow(0 0 6px rgba(129, 140, 248, 0.75));
    }

    /* Aurora Button Variant */
    [data-theme="aurora"] .btn-primary {
        background: var(--gradient-btn) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        border-radius: 0.75rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    [data-theme="aurora"] .btn-primary svg {
        color: white !important;
    }

    [data-theme="aurora"] .btn-primary:hover {
        box-shadow: 0 4px 12px rgba(139, 92, 246, 0.5);
        filter: brightness(1.05);
        transform: none;
    }

    /* Aurora Success Button (Ajukan Pembayaran, etc) */
    [data-theme="aurora"] .bg-emerald-600,
    [data-theme="aurora"] .bg-emerald-800 {
        background: linear-gradient(135deg, #ec4899 0%, #d946ef 50%, #a855f7 100%) !important;
        border: 1px solid rgba(255, 255, 255, 0.4) !important;
        box-shadow: 0 4px 15px rgba(168, 85, 247, 0.35) !important;
    }

    [data-theme="aurora"] .bg-emerald-600:hover,
    [data-theme="aurora"] .bg-emerald-800:hover {
        background: linear-gradient(135deg, #db2777 0%, #c026d3 50%, #9333ea 100%) !important;
        box-shadow: 0 6px 20px rgba(168, 85, 247, 0.5) !important;
        transform: translateY(-1px);
    }

    [data-theme="aurora"] .bg-emerald-600 svg,
    [data-theme="aurora"] .bg-emerald-800 svg {
        color: white !important;
    }

    /* Aurora: Job Order Detail header buttons */
    [data-theme="aurora"] .jo-header-actions .jo-action-btn {
        border-radius: 9999px !important;
        border-width: 1px;
        border-color: rgba(255, 255, 255, 0.7);
        box-shadow: 0 10px 24px rgba(148, 163, 184, 0.35);
        transition: transform 0.15s ease, box-shadow 0.15s ease, filter 0.15s ease;
    }

    [data-theme="aurora"] .jo-header-actions .jo-action-back {
        background: linear-gradient(135deg, #eef2ff, #e0f2fe) !important;
        color: #0f172a !important;
    }

    [data-theme="aurora"] .jo-header-actions .jo-action-edit {
        background: linear-gradient(135deg, #4f46e5, #7c3aed) !important;
        color: #ffffff !important;
    }

    [data-theme="aurora"] .jo-header-actions .jo-action-cancel {
        background: linear-gradient(135deg, #fee2e2, #fecaca) !important;
        color: #b91c1c !important;
    }

    [data-theme="aurora"] .jo-header-actions .jo-action-btn svg {
        color: inherit !important;
    }

    [data-theme="aurora"] .jo-header-actions .jo-action-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 14px 30px rgba(148, 163, 184, 0.45);
        filter: brightness(1.03);
    }

    /* Aurora: Invoice header buttons ("Request Faktur Pajak" & "Buat Invoice") */
    [data-theme="aurora"] .invoice-header-actions .btn-tax-invoice,
    [data-theme="aurora"] .invoice-header-actions .btn-create-invoice {
        background: linear-gradient(135deg, #ffffff, #e0e7ff) !important;
        color: #1e293b !important;
        border-radius: 9999px !important;
        border-color: rgba(255, 255, 255, 0.8) !important;
        box-shadow: 0 10px 25px rgba(15, 23, 42, 0.18);
    }

    [data-theme="aurora"] .invoice-header-actions .btn-tax-invoice svg,
    [data-theme="aurora"] .invoice-header-actions .btn-create-invoice svg {
        color: #1e293b !important;
    }

    [data-theme="aurora"] .invoice-header-actions .btn-tax-invoice:hover,
    [data-theme="aurora"] .invoice-header-actions .btn-create-invoice:hover {
        filter: brightness(1.03);
        box-shadow: 0 16px 30px rgba(15, 23, 42, 0.25);
        transform: translateY(-1px);
    }

    /* Aurora: Notification bell button in header */
    [data-theme="aurora"] header .notification-toggle {
        background: rgba(255, 255, 255, 0.18) !important;
        border-radius: 0.75rem !important;
        box-shadow: 0 8px 18px rgba(15, 23, 42, 0.25);
        color: rgba(15, 23, 42, 0.8) !important;
    }

    [data-theme="aurora"] header .notification-toggle svg {
        color: inherit !important;
    }

    [data-theme="aurora"] header .notification-toggle:hover {
        background: rgba(255, 255, 255, 0.3) !important;
        box-shadow: 0 12px 24px rgba(15, 23, 42, 0.3);
    }

    /* Aurora: Fix Indigo Buttons (Submit Payment, etc) */
    [data-theme="aurora"] .bg-indigo-600 {
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
        color: white !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
    }

    [data-theme="aurora"] .bg-indigo-600:hover {
        background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%) !important;
        box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
    }

    /* Base Glass Panels (Midnight & Gold) */
    .glass-blue,
    .glass-orange,
    .glass-green {
        border: 1px solid rgba(148, 163, 184, 0.35);
    }

    /* Aurora Glass Panels (Glossy & Gradient) */
    [data-theme="aurora"] .glass-panel {
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.6) 100%);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.8);
        box-shadow: 0 8px 32px rgba(139, 92, 246, 0.1);
    }

    [data-theme="aurora"] .glass-blue {
        background: linear-gradient(135deg, rgba(219, 234, 254, 0.8) 0%, rgba(191, 219, 254, 0.4) 100%);
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.15);
    }

    [data-theme="aurora"] .glass-orange {
        background: linear-gradient(135deg, rgba(255, 237, 213, 0.8) 0%, rgba(254, 215, 170, 0.4) 100%);
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: 0 4px 15px rgba(249, 115, 22, 0.15);
    }

    [data-theme="aurora"] .glass-green {
        background: linear-gradient(135deg, rgba(220, 252, 231, 0.8) 0%, rgba(187, 247, 208, 0.4) 100%);
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: 0 4px 15px rgba(34, 197, 94, 0.15);
    }

    /* Fix Leg Details Background */
    [data-theme="aurora"] .leg-details-bg {
        background: rgba(255, 255, 255, 0.5) !important;
        border-top: 1px solid rgba(139, 92, 246, 0.1);
    }

    /* Fix Sidebar Group Headers in Aurora */
    /* Fix Sidebar Group Headers in Aurora (Light Mode) */
    /* Aurora Sidebar Text & Nav Items */
    [data-theme="aurora"] .sidebar-text {
        color: #0F172A !important;
    }

    /* Aurora Sidebar Container */
    [data-theme="aurora"] aside.theme-sidebar {
        background:
            radial-gradient(circle at top left, rgba(236, 72, 153, 0.25), transparent 55%),
            radial-gradient(circle at bottom right, rgba(56, 189, 248, 0.18), transparent 55%),
            linear-gradient(180deg, rgba(255, 255, 255, 0.96) 0%, rgba(237, 233, 254, 0.96) 50%, rgba(248, 250, 252, 0.96) 100%) !important;
        box-shadow: 15px 0 40px rgba(148, 163, 184, 0.35);
        border-right: 1px solid rgba(148, 163, 184, 0.3);
    }

    /* Aurora Sidebar Section Headers */
    [data-theme="aurora"] .theme-sidebar .group-header {
        background: transparent !important;
        color: rgba(15, 23, 42, 0.55) !important;
    }

    [data-theme="aurora"] .theme-sidebar .group-header:hover {
        background: rgba(139, 92, 246, 0.08) !important;
        color: var(--color-primary) !important;
    }

    [data-theme="aurora"] .theme-sidebar .group-header p {
        color: inherit !important;
        opacity: 1 !important;
    }

    [data-theme="aurora"] .theme-sidebar .group-header svg {
        color: inherit !important;
    }

    /* Aurora Nav Items */
    [data-theme="aurora"] .nav-item {
        color: #64748B !important;
        border-radius: 9999px;
        border-color: transparent;
    }

    /* Thin separators between nav items */
    [data-theme="aurora"] .nav-item+.nav-item {
        box-shadow: inset 0 1px 0 rgba(148, 163, 184, 0.18);
    }

    [data-theme="aurora"] .nav-item:hover {
        background: rgba(139, 92, 246, 0.08) !important;
        color: #4C1D95 !important;
        border-color: rgba(139, 92, 246, 0.25) !important;
        box-shadow: 0 8px 18px rgba(148, 163, 184, 0.35);
    }

    [data-theme="aurora"] .nav-item.active {
        background: linear-gradient(90deg, rgba(139, 92, 246, 0.25) 0%, rgba(236, 72, 153, 0.2) 100%) !important;
        color: #4C1D95 !important;
        border-color: rgba(139, 92, 246, 0.4) !important;
        box-shadow: 0 12px 26px rgba(139, 92, 246, 0.4);
    }

    [data-theme="aurora"] .nav-item svg {
        color: inherit !important;
        transition: transform 0.15s ease, filter 0.15s ease;
    }

    [data-theme="aurora"] .nav-item:hover svg {
        transform: translateX(1px);
        filter: drop-shadow(0 2px 6px rgba(148, 163, 184, 0.45));
    }

    [data-theme="aurora"] .nav-item.active svg {
        transform: translateX(1px);
        filter: drop-shadow(0 2px 8px rgba(139, 92, 246, 0.6));
    }

    /* Nav Item Logic */
    .nav-item {
        @apply flex items-center gap-3 px-4 py-3 rounded-xl transition-all border border-transparent text-sm font-medium;
        color: var(--color-text-muted);
    }

    .nav-item:hover {
        @apply text-white bg-white/5;
    }

    .nav-item.active {
        @apply shadow-lg;
        border-color: var(--border-color);
        background: linear-gradient(90deg, rgba(255, 255, 255, 0.05) 0%, transparent 100%);
        color: white;
    }

    .nav-item.active svg {
        @apply drop-shadow-md;
        color: var(--color-primary);
    }

    /* Utility scroll */
    .custom-scrollbar {
        overflow-y: auto;
        scrollbar-width: thin !important;
        scrollbar-color: var(--color-primary) rgba(0, 0, 0, 0.3) !important;
    }

    .custom-scrollbar::-webkit-scrollbar {
        width: 8px !important;
        height: 8px !important;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.3) !important;
        border-radius: 10px !important;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: var(--color-primary) !important;
        border-radius: 10px !important;
        box-shadow: 0 0 10px var(--glow-color) !important;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: var(--color-primary) !important;
        box-shadow: 0 0 15px var(--glow-color) !important;
    }

    /* Aurora brand text animation */
    @keyframes auroraBrand {
        0% {
            background-position: 0% 50%;
        }

        100% {
            background-position: 200% 50%;
        }
    }

    /* Aurora: Sidebar user name glow (text only) */
    [data-theme="aurora"] .sidebar-user-name {
        color: var(--color-text-main) !important;
        text-shadow: none;
    }

    /* Table Styling */
    table {
        @apply w-full border-collapse;
        background: transparent !important;
    }

    table thead {
        background: var(--gradient-table) !important;
        border-bottom: 2px solid var(--border-color) !important;
    }

    [data-theme="aurora"] table thead {
        background: var(--gradient-table) !important;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    [data-theme="aurora"] table thead th,
    [data-theme="aurora"] table thead td {
        color: white !important;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    }

    table thead th {
        @apply px-4 py-3 text-left text-xs font-bold uppercase tracking-wider;
        color: white !important;
        text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        background: transparent !important;
    }

    table tbody {
        background: var(--bg-panel) !important;
    }

    table tbody tr {
        border-bottom: 1px solid var(--border-color) !important;
        transition: all 0.2s ease;
        background: transparent !important;
    }

    table tbody tr:hover {
        background: rgba(255, 255, 255, 0.05) !important;
        box-shadow: 0 0 15px var(--glow-color);
    }

    table tbody td {
        @apply px-4 py-3 text-sm;
        color: var(--color-text-main) !important;
        background: transparent !important;
    }

    /* Override any white backgrounds */

    .bg-white table,
    .bg-white thead,
    .bg-white tbody,
    .bg-white tr,
    .bg-white td,
    .bg-white th {
        background: transparent !important;
    }

    .bg-white table thead {
        background: var(--gradient-table) !important;
    }

    .bg-white table tbody {
        background: var(--bg-panel) !important;
    }

    /* AGGRESSIVE Global overrides for ALL white backgrounds */

    div.bg-white,
    section.bg-white,
    article.bg-white,
    aside.bg-white,
    main.bg-white {
        background: var(--bg-panel) !important;
        color: var(--color-text-main) !important;
        border-color: var(--border-color) !important;
    }

    /* Override ANY element with bg-white class */
    [class*="bg-white"] {
        background: var(--bg-panel) !important;
        color: var(--color-text-main) !important;
    }

    /* Override rounded cards */
    .rounded-xl.bg-white,
    .rounded-lg.bg-white,
    .rounded-2xl.bg-white,
    .rounded.bg-white {
        background: var(--bg-panel) !important;
        border-color: var(--border-color) !important;
    }

    /* Override shadow cards */
    .shadow-sm,
    .shadow-md,
    .shadow-lg,
    .shadow-xl,
    .shadow-2xl {
        background: var(--bg-panel) !important;
    }

    /* Override gray backgrounds */
    .bg-gray-50,
    .bg-gray-100,
    .bg-gray-200,
    .bg-slate-50,
    .bg-slate-100,
    .bg-slate-200 {
        background: var(--bg-surface-secondary) !important;
        color: var(--color-text-main) !important;
    }

    /* Override ALL light color backgrounds */
    .bg-blue-50,
    .bg-indigo-50,
    .bg-purple-50,
    .bg-pink-50,
    .bg-red-50,
    .bg-orange-50,
    .bg-amber-50,
    .bg-yellow-50,
    .bg-lime-50,
    .bg-green-50,
    .bg-emerald-50,
    .bg-teal-50,
    .bg-cyan-50 {
        background: rgba(0, 0, 0, 0.2) !important;
        color: var(--color-text-main) !important;
    }

    .bg-blue-100,
    .bg-indigo-100,
    .bg-purple-100,
    .bg-pink-100,
    .bg-red-100,
    .bg-orange-100,
    .bg-amber-100,
    .bg-yellow-100,
    .bg-lime-100,
    .bg-green-100,
    .bg-emerald-100,
    .bg-teal-100,
    .bg-cyan-100 {
        background: rgba(0, 0, 0, 0.25) !important;
        color: var(--color-text-main) !important;
    }

    .bg-blue-200,
    .bg-indigo-200,
    .bg-purple-200,
    .bg-pink-200,
    .bg-red-200,
    .bg-orange-200,
    .bg-amber-200,
    .bg-yellow-200,
    .bg-lime-200,
    .bg-green-200,
    .bg-emerald-200,
    .bg-teal-200,
    .bg-cyan-200 {
        background: rgba(0, 0, 0, 0.3) !important;
        color: var(--color-text-main) !important;
    }

    /* Badge styling */
    .bg-blue-100 {
        background: rgba(59, 130, 246, 0.2) !important;
        color: #93c5fd !important;
    }

    .bg-green-100 {
        background: rgba(34, 197, 94, 0.2) !important;
        color: #86efac !important;
    }

    .bg-yellow-100 {
        background: rgba(234, 179, 8, 0.2) !important;
        color: #fde047 !important;
    }

    .bg-red-100 {
        background: rgba(239, 68, 68, 0.2) !important;
        color: #fca5a5 !important;
    }

    .bg-amber-100 {
        background: rgba(245, 158, 11, 0.2) !important;
        color: #fcd34d !important;
    }

    .bg-slate-100 {
        background: rgba(148, 163, 184, 0.2) !important;
        color: #cbd5e1 !important;
    }

    .bg-orange-100 {
        background: rgba(249, 115, 22, 0.2) !important;
        color: #fdba74 !important;
    }

    .bg-teal-100 {
        background: rgba(20, 184, 166, 0.2) !important;
        color: #5eead4 !important;
    }

    .bg-cyan-100 {
        background: rgba(6, 182, 212, 0.2) !important;
        color: #67e8f9 !important;
    }

    /* Text color overrides */
    .text-slate-900,
    .text-slate-800,
    .text-slate-700,
    .text-gray-900,
    .text-gray-800,
    .text-gray-700 {
        color: var(--color-text-main) !important;
    }

    .text-slate-600,
    .text-slate-500,
    .text-gray-600,
    .text-gray-500 {
        color: var(--color-text-muted) !important;
    }

    /* Override hover states */
    .hover\:bg-slate-50:hover,
    .hover\:bg-slate-100:hover,
    .hover\:bg-gray-50:hover,
    .hover\:bg-gray-100:hover,
    .hover\:bg-white:hover {
        background: rgba(255, 255, 255, 0.05) !important;
    }

    /* Override gradient backgrounds */
    .bg-gradient-to-br,
    .bg-gradient-to-r,
    .bg-gradient-to-l,
    .bg-gradient-to-t,
    .bg-gradient-to-b {
        background: var(--bg-panel) !important;
    }

    /* Force dark backgrounds on common patterns */
    [class*="from-blue"],
    [class*="from-indigo"],
    [class*="from-green"],
    [class*="from-emerald"],
    [class*="from-orange"],
    [class*="from-red"] {
        background: rgba(0, 0, 0, 0.3) !important;
    }

    /* Override backgrounds with opacity (slash notation) */
    [class*="bg-slate-50/"],
    [class*="bg-slate-100/"],
    [class*="bg-gray-50/"],
    [class*="bg-gray-100/"],
    [class*="bg-blue-50/"],
    [class*="bg-indigo-50/"],
    [class*="bg-purple-50/"],
    [class*="bg-green-50/"],
    [class*="bg-emerald-50/"],
    [class*="bg-teal-50/"],
    [class*="bg-cyan-50/"],
    [class*="bg-red-50/"],
    [class*="bg-orange-50/"],
    [class*="bg-amber-50/"],
    [class*="bg-yellow-50/"] {
        background: rgba(0, 0, 0, 0.2) !important;
    }

    /* Exception: Preview Modal - Force white background for printing */
    #preview_modal,
    #preview_modal *,
    #preview_modal .bg-white,
    #preview_modal [class*="bg-white"],
    #preview_content,
    #preview_content * {
        background: white !important;
        color: #0f172a !important;
    }

    #preview_modal .bg-slate-50 {
        background: #f8fafc !important;
    }

    #preview_modal .bg-slate-100 {
        background: #f1f5f9 !important;
    }

    #preview_modal .text-slate-900 {
        color: #0f172a !important;
    }

    #preview_modal .text-slate-700 {
        color: #334155 !important;
    }

    #preview_modal .text-indigo-600 {
        color: #4f46e5 !important;
    }

    #preview_modal .border-slate-200 {
        border-color: #e2e8f0 !important;
    }

    #preview_modal .border-slate-300 {
        border-color: #cbd5e1 !important;
    }

    /* CRITICAL FIX: Force modals above sidebar */
    /* Override sidebar z-index */
    aside.theme-sidebar {
        z-index: 10 !important;
    }

    /* Force preview modal to absolute maximum z-index */
    #preview_modal {
        z-index: 999999 !important;
    }

    /* Force job order modal above sidebar but below preview */
    #jobOrderModal {
        z-index: 99999 !important;
    }

    /* All modals should be above sidebar */
    [id$="Modal"],
    [id$="modal"] {
        z-index: 99998 !important;
    }
}